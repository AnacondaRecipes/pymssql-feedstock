From 21a8cbdbcafe5788ec8be4d90f0945f6ddb47c1e Mon Sep 17 00:00:00 2001
From: Andrii Osipov <aosipov@anaconda.com>
Date: Wed, 10 Dec 2025 05:49:25 -0800
Subject: [PATCH] customize compiler

---
 dev/ccompiler.py | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/dev/ccompiler.py b/dev/ccompiler.py
index 0a84782..1ea2706 100644
--- a/dev/ccompiler.py
+++ b/dev/ccompiler.py
@@ -113,7 +113,9 @@ def check_clock_gettime(libraries):
     """
         check for clock_gettime, link with librt for glibc<2.17
     """
+    from distutils.sysconfig import customize_compiler
     compiler = new_compiler()
+    customize_compiler(compiler)
     try:
         if not compiler.has_function('clock_gettime(0,NULL)', includes=['time.h']):
             if compiler.has_function('clock_gettime(0,NULL)', includes=['time.h'], libraries=['rt']):
-- 
2.39.3 (Apple Git-146)

